version: "2.0"

stories:

- story: Pay CC, while active user asks account balance, ask continue
  steps:
  - intent: pay_cc
  - action: cc_payment_form
  - active_loop: cc_payment_form
  - intent: check_balance
  - action: action_show_balance
  - slot_was_set:
    - account_type: null
  - action: utter_ask_continue
  - checkpoint: while-cc_payment_form-action_show_balance-ask_continue

- story: Deny continuation of cc_payment_form
  steps:
  - checkpoint: while-cc_payment_form-action_show_balance-ask_continue
  - intent: deny
  # Cancels cc payment & cleans out the slots
  - action: action_pay_cc
  - slot_was_set:
    - credit_card: null
  - slot_was_set:
    - account_type: null
  - active_loop: null
  
- story: Affirm continuation of cc_payment_form
  steps:
  - checkpoint: while-cc_payment_form-action_show_balance-ask_continue
  - intent: affirm
  - action: cc_payment_form


#- story: search transactions switch to transfer money
#  steps:
#  - or:
#    - intent: search_transactions
#    - intent: check_earnings
#  - action: transact_search_form
#  - active_loop: transact_search_form
#  - intent: transfer_money
#  - action: utter_ask_switch_goal
#  - intent: affirm
#  - action: transfer_form
#  - active_loop: transfer_form
#  - active_loop: null
#  - action: utter_ask_back_to_transact
#  - intent: affirm
#  - action: transact_search_form
#  - active_loop: transact_search_form
#  - active_loop: null
#- story: search transactions switch to transfer money, deny
#  steps:
#  - or:
#    - intent: search_transactions
#    - intent: check_earnings
#  - action: transact_search_form
#  - active_loop: transact_search_form
#  - intent: transfer_money
#  - action: utter_ask_switch_goal
#  - intent: deny
#  - action: transact_search_form
#  - active_loop: transact_search_form
#  - active_loop: null
#- story: search transactions switch to transfer money, don't continue transactions
#  steps:
#  - or:
#    - intent: search_transactions
#    - intent: check_earnings
#  - action: transact_search_form
#  - active_loop: transact_search_form
#  - intent: transfer_money
#  - action: utter_ask_switch_goal
#  - intent: affirm
#  - action: transfer_form
#  - active_loop: transfer_form
#  - active_loop: null
#  - action: utter_ask_back_to_transact
#  - intent: deny
#  - action: utter_ok


#- story: Transfer money pay credit card
#  steps:
#  - intent: transfer_money
#  - action: transfer_form
#  - active_loop: transfer_form
#  - intent: pay_cc
#  - action: cc_payment_form
#  - active_loop: cc_payment_form
#  - active_loop: null
#  - action: utter_ask_back_to_transfer
#  - intent: affirm
#  - action: transfer_form
#  - active_loop: transfer_form
#  - active_loop: null
#- story: Transfer money pay credit card
#  steps:
#  - intent: transfer_money
#  - action: transfer_form
#  - active_loop: transfer_form
#  - intent: pay_cc
#  - action: cc_payment_form
#  - active_loop: cc_payment_form
#  - active_loop: null
#  - action: utter_ask_back_to_transfer
#  - intent: deny
#  - action: utter_ok
#

