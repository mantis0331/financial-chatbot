version: '2'

rules:

- rule: greet
  steps:
  - intent: greet
  - action: utter_greet
  - action: utter_help

- rule: say goodbye
  steps:
  - intent: goodbye
  - action: utter_goodbye
  
- rule: help
  steps:
  - intent: help
  - action: utter_help
  
- rule: thankyou
  steps:
  - intent: thankyou
  - action: utter_noworries

- rule: Always utter_ok after an affirm
  steps:
  - intent: affirm
  - action: utter_ok
  
- rule: is there a transfer charge
  steps:
  - intent: ask_transfer_charge
  - action: utter_transfer_charge
  
- rule: Show list of known recipients
  steps:
  - intent: check_recipients
  - action: action_recipients
  
- rule: Show balance (bank account or credit card, based on account_type)
  steps:
  - intent: check_balance
  - action: action_show_balance
        
- rule: Activate cc_payment_form
  steps:
  - intent: pay_cc
  - action: cc_payment_form
  - active_loop: cc_payment_form
  
- rule: Submit cc_payment_form
  condition:
  - active_loop: cc_payment_form
  steps:
  - action: cc_payment_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_pay_cc
  
- rule: Activate transfer_money_form
  steps:
  - intent: transfer_money
  - action: transfer_money_form
  - active_loop: transfer_money_form
  
- rule: Submit transfer_money_form after all slots are filled
  condition:
  - active_loop: transfer_money_form
  steps:
  - action: transfer_money_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_transfer_money

- rule: Activate transaction_search_form from search_transactions intent
  steps:
  - intent: search_transactions
  - action: transaction_search_form
  - active_loop: transaction_search_form

- rule: Activate transaction_search_form from check_earnings intent
  steps:
  - intent: check_earnings
  - action: transaction_search_form
  - active_loop: transaction_search_form
  
- rule: Submit transaction_search_form
  condition:
  - active_loop: transaction_search_form
  steps:
  - action: transaction_search_form
  - active_loop: null
  - slot_was_set:
    - requested_slot: null
  - action: action_transaction_search
